<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/header::head('Tag Music')}"></head>
<meta charset="UTF-8">
<title></title>
<!-- static 폴더 이후의 위치를 적으면 된다. -->
<script th:src="@{/js/jquery-3.6.1.min.js}"></script>

<script th:inline="javascript">

	$(document).ready(function() {
		
		//fn_userPlaylist();	// 구현 : 유저의 플레이리스트 조회 ajax
		//fn_playlistCnt();

	});
	
	// 구현 : 유저의 플레이리스트 전부 불러오기
	/* function fn_userPlaylist() {
		
		$.ajax({
			type: 'get',
			url: '/music/user/playlist',
			data : 'page=1',
			dataType: 'json',
			success: function(resData) {	
				console.log(resData);
				
				$('.playlist_item_area').empty();	// 리스트 초기화
				
				$.each(resData.userPlaylist, function(index, playlist) {
					console.log(playlist.listName);
					
					 $('<div class="playlist_item">')
					.append( $('<div class="playlist_item_area_left"><div class="playlist_thumbnail"></div></div>') )
					.append( $('<div class="playlist_item_area_middle"><div class="playlist_item_area_right_item">'+playlist.listName+'</div></div>') )
					.append( $('<div class="playlist_item_area_right">').append( $('<div class="btn_playlist_delete">삭제</div>') ) ) 
					.appendTo('.playlist_item_area');
				}); 
			}
		});
	} */
	
	function fn_playlistCnt() {
		
		$.ajax({
			type: 'get',
			url: '/music/user/playlistCnt',
			data : 'listNo=' + $('#listNo').val(),
			dataType: 'json',
			success: function(resData) {	
				console.log(resData);
				
				$('.playlist_item_area').empty();	// 리스트 초기화
				
				$.each(resData.userPlaylist, function(index, playlist) {
					console.log(playlist.listName);
					
					 $('<div class="playlist_item">')
					.append( $('<div class="playlist_item_area_left"><div class="playlist_thumbnail"></div></div>') )
					.append( $('<div class="playlist_item_area_middle"><div class="playlist_item_area_right_item">'+playlist.listName+'</div></div>') )
					.append( $('<div>').append( $('<div class="playlist_item_area_right">').append( $('<div class="btn_playlist_delete">삭제</div>') ) ) )
					.appendTo('.playlist_item_area');
				}); 
			}
		});
		
		
		
	}



</script>
</head>
<body>

	<!--  page : 최신리스트 게시판 -->
	
	<div th:replace="~{layout/header.html::header_layout}"></div>

	<div class="session">
		<div th:replace="~{layout/side.html::side_layout}"></div>
		
		<div class="playlist_container">
			<div class="playlist">
				<div class="playlist_title">
					<p class="playlist_title_username" th:text="|${userName} 님의 플레이리스트|"></p>
		
				</div>
				<div class="playlist_header">
					<span class="playlist_cnt" th:text="|${userPlaylistCnt} 개|"></span>
					<span class="btn_playlist_add" >     +    플레이리스트 만들기</span>
					<span class="btn_playlist_edit" >     +    편집하기</span>
					<script>
					
						// * 윈도우함수
						$('.btn_playlist_add').click(function() {
							window.open('/music/user/playlist/add/', 'page', 'scrollbars=no, width=600px, height=400px, top=290px, left=575px, resizable=no');
							// 전체 너비 1650, 높이 900
							// 팝업창 너비 600, 높이 400
							// left : 525, top : 250
					
						});
						
						
					
					</script>
				</div>
				
				<div class="playlist_body">
					<div class="playlist_item_area">
					<input type="hidden" id="page" th:value="1">
					
						
						<!--  # 구현 : 플레이리스트 목록 불러오기 -->
						<div class="playlist_item" th:each="playlist,vs:${userPlaylist}">
						
							<input type="hidden" id="listNo" th:value="${playlist.listNo}">
							<div class="playlist_item_area_left">
								<div class="playlist_thumbnail"></div>
							</div>
							
							<div class="playlist_item_area_middle">
								<div class="playlist_item_area_right_item" th:text="${playlist.listName}"></div>
								<div class="">
									<!-- # 기능 : 각 플레이리스트별 음악개수 : ajax  -->
									
								</div>
							</div>
							<div>
								<div class="playlist_item_area_right">
									<div class="btn_playlist_delete">삭제</div>
								</div>
							</div>
						</div>
					</div>
					
			
				
				</div>
			</div>
		</div>
		
			
	</div>
</body>
</html>