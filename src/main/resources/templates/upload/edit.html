<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/header::head('태그뮤직>고객센터')}"></head>
<meta charset="UTF-8">
<title>고객센터>태그뮤직</title>
<script th:src="@{/js/jquery-3.6.1.min.js}"></script>
<link rel="stylesheet" th:href="@{/css/board.css}">
<script>
	
	$(function(){
		fn_fileCheck();
		fn_removeAttach();
	});
		
	function fn_fileCheck(){
		
		$('#files').change(function(){
			
			let maxSize = 1024 * 1024 * 1000; 
			
			let files = this.files;
			
			$('#file_list').empty();
			$.each(files, function(i, file){
				
				if(file.size > maxSize){
					alert('1000MB 이하의 파일만 첨부할 수 있습니다.');
					$(this).val('');
					return;
				}
				
				$('#file_list').append('<div>' + file.name + '</div>');
				
			});
			
		});
		
	}
		
		$('#frm_edit').submit(function(event){
			if($('#title').val() == ''){
				alert('제목은 필수입니다.');
				event.preventDefault();
				return;
				
			}
		});
	
	
	function fn_removeAttach(){
		
		$('.lnk_remove_attach').click(function(event){
			if(confirm('첨부 파일을 삭제할까요?') == false){
				event.preventDefault();
				return;
			}
		});
	}
</script>
<body>

  
	<div th:replace="~{layout/header.html::header_layout}"></div>
	<div th:replace="~{layout/side.html::side_layout}"></div>
	
	<div class="board_controller">
		
		<!-- 제목 -->
		<div class="board_title">공지사항 편집화면</div>
		<!-- 상단 (tap) -->
		<div class="board_top_controller">
			<div class="board_tab_controller">
				<div class="board_tab" id="tabHome">홈</div>
				<div class="board_tab tab_click" id="tabNotice">공지사항</div>
				<div class="board_tab" id="tabFAQ">자주 하는 질문</div>
				<div class="board_tab" id="tabChat">1:1 문의하기</div>
			</div>
		</div>
				

	   <div>
	
	  <form id="frm_edit" th:action="@{/upload/modify}" method="post" enctype="multipart/form-data">
		  <table class="table table-striped">
		   <input type="hidden" name="uploadNo" th:value="${upload.uploadNo}">
			<thead>
			  <tr>
			    <td style="background-color:rgb(192, 192, 192)">
				 <h2><label for="title" style="background-color:rgb(192, 192, 192)">제목</label></h2>	
			    </td>	
			    <td style="height:95%;width:95%; background-color:rgb(192, 192, 192)">	
				 <input type="text" id="title" name="title" th:value="${upload.title}" required="required" style="height: 45px;width:100%;border: 0; background-color:rgb(255, 255, 255)">
			   </td>
			</thead>
			
			<tbody>
			  <tr>
			   <td style="background-color:rgb(192, 192, 192)">  
				<h3><label for="title" style="background-color:rgb(192, 192, 192)">내용</label></h3>	
			   </td>
			   <td style="height:100%;width:100%;">	
				<textarea name="content" id="content" th:text="${upload.Content}" style="height:100%;width:100%;border: 0; background-color:rgb(255, 255, 255)"></textarea>				
			   </td>
			  </tr> 
			</tbody>
			
			<tfoot>
			 <tr>
			  <td>
			     <input type="file" id="files" name="files" multiple="multiple">
				  <div id="file_list"></div>
			  </td>	  
			  <td style="text-align:right;">
				<input type="button" value="목록" onclick="location.href='/upload/list'">
				<button>편집완료</button>
			  </td>
			 </tr>  	
			</tfoot>	
		  </table>
		</form>
		
		<hr>
		
		<div>
			<h4>첨부삭제</h4>
			 <tr th:each="attach : ${attachList}">
			  <a class="lnk_remove_attach" th:href="@{/upload/attach/remove(uploadNo=${upload.uploadNo},attachNo=${attach.attachNo})}"><td th:text="${attach.origin}"></td></a>
			 </tr>
		</div>
	</div>
	</div> <!--board_controller-->
</body>
</html>