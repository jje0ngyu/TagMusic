<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/header::head('Tag Music')}"></head>
<meta charset="UTF-8">

<title></title>
<style>
	ul,ol{list-style:none}
	a{text-decoration:none;color:#fff962;font-size:15px}
	nav{overflow:hidden;height:80px;background-color:#1b2035; margin-top:150px;}
	#nav3 {
	  width: 100%;
	  height: 10%;
	  position: relative;
	  text-align: center;
	}
	#nav3>a {
	  line-height: 80px;
	  display: block;
	  font-size: 30px;
	  font-weight: 900;
	  position: absolute;
	  left: 30px;
	}
	#nav3>select {
	  padding: 0 20px;
	  height: 30px;
	  background-color: #1b2035;
	  color: #fff;
	  position: absolute;
	  right: 30px;
	  top: 50%;
	  transform: translateY(-15px);
	  border: 2px solid #fff;
	  border-radius: 30px;
	}
	#nav3>ul {
	  display: inline-block;
	}
	#nav3>ul li {
	  float: left;
	  line-height: 80px;
	  padding: 0 30px;
	}
	
	.payContent {
 		margin: 50px auto 0;
 		position: relative;
 		width: 1200px;
	}
	#buyPageDiv{
		margin: 10px auto;
		padding: 50px;
		position: relative;
    	width: 100%;
    	background-color: #ECECEC;
    	
	}
	.pass_box {
		width: 420px;
		margin: auto;
	}
	.pass_name {
		position: relative;
		display: inline-block;
	}
	.pass_btn {
		position: relative;
		display: inline-block;
	}
	
	
</style>
<!-- static 폴더 이후의 위치를 적으면 된다. -->
<script th:src="@{/js/jquery-3.6.1.min.js}"></script>
<script type="text/javascript" src="https://service.iamport.kr/js/iamport.payment-1.1.5.js"></script>

<script th:inline="javascript">
$(document).ready(function(){
	var userName = $('#userName').data('name');
	if(userName != null){
		fn_userLog();
	} else {
		fn_isNotUser();
	}
	
 });
function fn_userLog(){
	$.ajax({
		type: 'post',
		url: 'payment/log/list',
		dataType: 'json',
		success: function(resData){
			var txt = '';
			$.each(resData.passList, function(i, pass){
				
				
				
			});
			$('#buyPageDiv').append(txt);
		}
	});
}
</script>
</head>
<body>
	
	<div th:replace="~{layout/header.html::header_layout}"></div>

	<div class="session">
		<div th:replace="~{layout/side.html::side_layout}"></div>
		
		
		<!--  ** 모든 컨텐츠는 해당 content태그 아래에서 작성하시오  ** -->
		<div class="payContent">
			<nav id="nav3">
				<h1>이용권 구매</h1>
				<hr>
				<ul>
					<li>
						<a th:href="@{/payment/buy}">태그뮤직 BEST</a>
					</li>
				</ul>
			</nav>
			<input type="hidden" id="isUser" th:data-user="${session}">
			<div th:if="${session.loginUser != null}">
				<input type="hidden" id="userName" th:data-name="${session.loginUser.name}">
				<input type="hidden" id="userEmail" th:data-email="${session.loginUser.email}">
				<input type="hidden" id="userMobile" th:data-mobile="${session.loginUser.mobile}">
				<input type="hidden" id="userAddr1" th:data-addr="${session.loginUser.roadAddress}">
				<input type="hidden" id="userAddr2" th:data-addr="${session.loginUser.jibunAddress}">
				<input type="hidden" id="userAddr3" th:data-addr="${session.loginUser.detailAddress}">
				<input type="hidden" id="userAddr4" th:data-addr="${session.loginUser.extraAddress}">
				<input type="hidden" id="postcode" th:data-postcode="${session.loginUser.postcode}">
				<input type="hidden" class="isUser" th:data-user="true">
				<form th:action="@{/payment/history}" method="post">
					<input type="hidden" name="userName" th:value="${session.loginUser.name}">
					<input type="submit" value="결제이력">
				</form>
			</div> 
			<div id="buyPageDiv">
			</div>
		</div>
	</div>
	<form action="/user/login/form" id="frm_login"></form>

	
</body>
</html>