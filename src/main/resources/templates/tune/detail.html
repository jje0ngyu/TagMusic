<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/header::head('Tag Music')}"></head>
<meta charset="UTF-8">
<title>Tag Music > 상세보기</title>
<link rel="stylesheet" th:href="@{/css/tuneDetail.css}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
<script>
	$(function(){
		fn_tabContent();
		fn_next_track_box();
		fn_lyrics_box();
		fn_icon();
	});

	function fn_tabContent(){
		$('.tune_tab_content').click(function(){
			$('.tune_tab_content').removeClass('border_bottom_solid_white');
			$('.tune_next_track_box').addClass('blind');
			$('.tune_lyrics_box').addClass('blind');
			$(this).addClass('border_bottom_solid_white');
		});
	}
	
	function fn_next_track_box(){
		$('.tab_next_track').click(function(){
			$('.tune_next_track_box').removeClass('blind');
		});
	}
	
	function fn_lyrics_box(){
		$('.tab_lyrics').click(function(){
			$('.tune_lyrics_box').removeClass('blind');
		});
	}
	
	function fn_click_album_image(){
		$('#albumImg').click(function(){
			var imgSrc =  $(this).attr('src').val();
			$('#music_iframe').attr('src', imgSrc);
		});
	}
	
	var i = 0;	// 플레이 중인지 아닌지 확인하는 변슈
	function fn_icon() {
		$('.tune_main_panel').on('click', function(){
			if(i==0) {
				$('i').attr('class', 'bi bi-pause-circle-fill');
				$('i').css('animation-play-state','running');
				i++;
				location.href='/tune/iframe?musicNo=26';
			} else {
				$('i').attr('class', 'bi bi-play-circle-fill');
				$('i').css('animation-play-state','running');
				i--;
			}
		});
	}

</script>
<style>

</style>
</head>
<body>
	<div th:replace="~{layout/header.html::header_layout}"></div>
	<div th:replace="~{layout/side.html::side_layout}"></div>
	
	<div class="tune_container">
		<div class="tune_content">
			<div class="tune_main_panel">
				<div class="flex_center blind">
					<i class="bi bi-play-circle-fill"></i>
				</div>
				<div class="flex_center">
				</div>
				<img th:src="@{/tune/display/image(musicNo=${music.musicNo})}" name="image" class="tune_album_img">
			</div>
			<div class="tune_side_panel">
				<div class="tune_tab">
					<div class="tune_tab_content tab_next_track border_bottom_solid_white">
						다음 트랙
					</div>
					<div class="tune_tab_content tab_lyrics">
						가사
					</div>
					<div class="tune_tab_content">
						댓글
					</div>
				</div>
				<div class="tune_next_track_box">
					다음 트랙
					1
					2
					3
					4
					...
				</div>
				<div class="tune_lyrics_box blind">
					<textarea class="tune_lyrics" th:text="${music.musicContent}"></textarea>
			
				</div>
				<div>
					<a th:href="@{/tune/download(musicNo=${music.musicNo})}">음원 다운로드 하기</a>
				</div>
			</div>
		</div>
		
	</div>
</body>
</html>